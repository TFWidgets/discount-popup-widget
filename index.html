<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÅ Test Exit Intent</title>
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .instructions {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-bottom: 30px;
        }
        .test-button {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
        }
    </style>
</head>
<body>
    <div class="instructions">
        <h1>üéÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Exit Intent</h1>
        <h3>üìã –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:</h3>
        <ol>
            <li><strong>–ù–∞–≤–µ–¥–∏ –∫—É—Ä—Å–æ—Ä</strong> –Ω–∞ —ç—Ç—É –æ–±–ª–∞—Å—Ç—å —Ç–µ–∫—Å—Ç–∞</li>
            <li><strong>–ë—ã—Å—Ç—Ä–æ –≤—ã–≤–µ–¥–∏ –∫—É—Ä—Å–æ—Ä –≤–≤–µ—Ä—Ö</strong> –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞</li>
            <li><strong>–ü–æ–ø–∞–ø –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è</strong> –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã</li>
        </ol>
        <p><strong>–í–∞–∂–Ω–æ:</strong> –ö—É—Ä—Å–æ—Ä –¥–æ–ª–∂–µ–Ω –¥–≤–∏–≥–∞—Ç—å—Å—è –∏–º–µ–Ω–Ω–æ <strong>–≤–≤–µ—Ä—Ö</strong> –∏ –≤—ã—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ <strong>–≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É</strong> –æ–∫–Ω–∞!</p>
        
        <button class="test-button" onclick="showPopup()">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ø–∞–ø –≤—Ä—É—á–Ω—É—é</button>
        <button class="test-button" onclick="simulateExit()">–°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å exit-intent</button>
        <button class="test-button" onclick="resetTrigger()">–°–±—Ä–æ—Å–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä</button>
    </div>

    <!-- Exit Intent Popup -->
    <script id="dpw-local-config" type="application/json">
    {
      "title": "Wait! Don't leave!",
      "message": "Get 25% off before you go",
      "couponCode": "STAY25",
      "iconHtml": "&#128683;",
      "buttonText": "Get discount",
      "dismissText": "No thanks",
      "showOnExit": true,
      "triggerDelay": 0,
      "showOnScroll": 0,
      "frequency": "always",
      "style": {
        "colors": {
          "headerBackground": "linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",
          "btnPrimary": "linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)"
        }
      }
    }
    </script>
    <script src="./embed.js" data-id="local"></script>

    <script>
        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ø–∞–ø –≤—Ä—É—á–Ω—É—é
        function showPopup() {
            if (window.DiscountPopups && window.DiscountPopups.local) {
                window.DiscountPopups.local.show();
                console.log('‚úÖ –ü–æ–ø–∞–ø –ø–æ–∫–∞–∑–∞–Ω –≤—Ä—É—á–Ω—É—é');
            }
        }

        // –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å exit-intent —Å–æ–±—ã—Ç–∏–µ
        function simulateExit() {
            document.dispatchEvent(new MouseEvent('mouseleave', {
                clientY: -10,
                clientX: 100
            }));
            console.log('üö™ Exit-intent —Å–æ–±—ã—Ç–∏–µ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–æ');
        }

        // –°–±—Ä–æ—Å–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function resetTrigger() {
            sessionStorage.clear();
            localStorage.clear();
            console.log('üîÑ –¢—Ä–∏–≥–≥–µ—Ä—ã —Å–±—Ä–æ—à–µ–Ω—ã');
        }

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        setTimeout(() => {
            console.log('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ø–∞–ø—ã:', Object.keys(window.DiscountPopups || {}));
            if (window.DiscountPopups?.local) {
                console.log('‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥ exit-intent:', {
                    showOnExit: window.DiscountPopups.local.config.showOnExit,
                    frequency: window.DiscountPopups.local.config.frequency
                });
            }
        }, 1000);
    </script>
</body>
</html>
